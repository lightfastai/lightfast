---
title: TypeScript SDK
description: TypeScript SDK API reference for the Lightfast search API
---

# TypeScript SDK Reference

The `lightfast` npm package provides a type-safe client for the Lightfast API.

## Installation

```bash
npm install lightfast
```

## Client Configuration

```typescript
import { Lightfast } from "lightfast";

const client = new Lightfast(config: LightfastConfig);
```

### LightfastConfig

| Property | Type | Required | Default | Description |
|----------|------|----------|---------|-------------|
| `apiKey` | `string` | Yes | - | API key (starts with `sk-lf-`) |
| `baseUrl` | `string` | No | `https://lightfast.ai` | API base URL |
| `timeout` | `number` | No | `30000` | Request timeout in milliseconds |

---

## Methods

### search()

Search through workspace memory for relevant documents and observations.

```typescript
const response = await client.search(input: SearchInput): Promise<V1SearchResponse>
```

#### SearchInput

| Property | Type | Required | Default | Description |
|----------|------|----------|---------|-------------|
| `query` | `string` | Yes | - | The search query text to find relevant documents |
| `limit` | `number` | No | `10` | Maximum number of results to return (1-100) |
| `offset` | `number` | No | `0` | Result offset for pagination |
| `mode` | `"fast" \| "balanced" \| "thorough"` | No | `"balanced"` | Search quality mode: `"fast"` (speed), `"balanced"` (default), `"thorough"` (quality) |
| `filters` | `SearchFilters` | No | - | Optional filters to scope results |
| `includeContext` | `boolean` | No | `true` | Include contextual information like topic clusters |
| `includeHighlights` | `boolean` | No | `true` | Include highlighted text snippets |

#### SearchFilters

| Property | Type | Description |
|----------|------|-------------|
| `sourceTypes` | `string[]` | Source types to include (e.g., `["github", "linear"]`) |
| `observationTypes` | `string[]` | Observation types to include (e.g., `["commit", "issue"]`) |
| `actorNames` | `string[]` | Actor names to filter by (e.g., `["@sarah", "@mike"]`) |
| `dateRange` | `{ start?: string; end?: string }` | Date range filter with ISO datetime strings |

#### V1SearchResponse

```typescript
interface V1SearchResponse {
  data: V1SearchResult[];
  context?: {
    clusters?: Array<{
      topic: string | null;
      summary: string | null;
      keywords: string[];
    }>;
    relevantActors?: Array<{
      displayName: string;
      expertiseDomains: string[];
    }>;
  };
  meta: {
    total: number;
    limit: number;
    offset: number;
    took: number;
    mode: "fast" | "balanced" | "thorough";
    paths: {
      vector: boolean;
      entity: boolean;
      cluster: boolean;
      actor: boolean;
    };
  };
  latency: {
    total: number;
    auth?: number;
    parse?: number;
    search?: number;
    embedding?: number;
    retrieval: number;
    entitySearch?: number;
    clusterSearch?: number;
    actorSearch?: number;
    rerank: number;
    enrich?: number;
    maxParallel?: number;
  };
  requestId: string;
}

interface V1SearchResult {
  id: string;
  title: string;
  url: string;
  snippet: string;
  score: number;
  source: string;
  type: string;
  occurredAt?: string;
  entities?: Array<{
    key: string;
    category: string;
  }>;
  references?: Array<{
    type: string;
    id: string;
    url?: string;
    label?: string;
  }>;
  highlights?: {
    title?: string;
    snippet?: string;
  };
}
```

#### Example

```typescript
const results = await client.search({
  query: "authentication implementation",
  limit: 10,
  mode: "balanced",
  filters: {
    sourceTypes: ["github"],
    dateRange: {
      start: "2024-01-01T00:00:00Z",
      end: "2024-12-31T23:59:59Z",
    },
  },
});

console.log(results.data); // Array of search results
console.log(results.meta.total); // Total matching documents
```

---

### contents()

Fetch full content for documents by their IDs.

```typescript
const response = await client.contents(input: ContentsInput): Promise<V1ContentsResponse>
```

#### ContentsInput

| Property | Type | Required | Description |
|----------|------|----------|-------------|
| `ids` | `string[]` | Yes | Array of document or observation IDs to fetch (1-50 IDs) |

#### V1ContentsResponse

```typescript
interface V1ContentsResponse {
  items: V1ContentItem[];
  missing: string[];
  requestId: string;
}

interface V1ContentItem {
  id: string;
  title: string | null;
  url: string;
  snippet: string;
  content?: string;
  source: string;
  type: string;
  occurredAt?: string;
  metadata?: Record<string, unknown>;
}
```

#### Example

```typescript
const contents = await client.contents({
  ids: ["obs_abc123", "doc_def456"],
});

console.log(contents.items); // Found content items
console.log(contents.missing); // IDs that were not found
```

---

### findSimilar()

Find content semantically similar to a given document or URL.

```typescript
const response = await client.findSimilar(input: FindSimilarInput): Promise<V1FindSimilarResponse>
```

#### FindSimilarInput

| Property | Type | Required | Default | Description |
|----------|------|----------|---------|-------------|
| `id` | `string` | One of `id` or `url` | - | Document ID to find similar content for |
| `url` | `string` | One of `id` or `url` | - | URL to find similar content for (alternative to id) |
| `limit` | `number` | No | `10` | Maximum number of similar items to return (1-50) |
| `threshold` | `number` | No | `0.5` | Minimum similarity score (0-1) |
| `sameSourceOnly` | `boolean` | No | `false` | Only return results from the same source type |
| `excludeIds` | `string[]` | No | - | Array of IDs to exclude from results |
| `filters` | `SearchFilters` | No | - | Optional filters to scope results |

#### V1FindSimilarResponse

```typescript
interface V1FindSimilarResponse {
  source: {
    id: string;
    title: string;
    type: string;
    cluster?: {
      topic: string | null;
      memberCount: number;
    };
  };
  similar: V1SimilarResult[];
  meta: {
    total: number;
    took: number;
    inputEmbedding: {
      found: boolean;
      generated: boolean;
    };
  };
  requestId: string;
}

interface V1SimilarResult {
  id: string;
  title: string;
  url: string;
  snippet?: string;
  score: number;
  vectorSimilarity: number;
  entityOverlap?: number;
  sameCluster: boolean;
  source: string;
  type: string;
  occurredAt?: string;
}
```

#### Example

```typescript
const similar = await client.findSimilar({
  url: "https://github.com/org/repo/pull/123",
  limit: 5,
  threshold: 0.7,
});

console.log(similar.similar); // Array of similar items
console.log(similar.source); // Source document info
```

---

### graph()

Traverse the relationship graph from a starting observation. Returns connected observations with relationship edges.

```typescript
const response = await client.graph(input: GraphInput): Promise<GraphResponse>
```

#### GraphInput

| Property | Type | Required | Default | Description |
|----------|------|----------|---------|-------------|
| `id` | `string` | Yes | - | Observation ID to start graph traversal from |
| `depth` | `number` | No | `2` | Traversal depth (1-3) |
| `types` | `string[]` | No | - | Filter by relationship types |

#### GraphResponse

```typescript
interface GraphResponse {
  data: {
    root: {
      id: string;
      title: string;
      source: string;
      type: string;
    };
    nodes: Array<{
      id: string;
      title: string;
      source: string;
      type: string;
      occurredAt: string | null;
      url: string | null;
      isRoot?: boolean;
    }>;
    edges: Array<{
      source: string;
      target: string;
      type: string;
      linkingKey: string | null;
      confidence: number;
    }>;
  };
  meta: {
    depth: number;
    nodeCount: number;
    edgeCount: number;
    took: number;
  };
  requestId: string;
}
```

#### Example

```typescript
const graph = await client.graph({
  id: "obs_abc123",
  depth: 2,
});

console.log(graph.data.nodes); // All connected nodes
console.log(graph.data.edges); // Relationship edges
console.log(graph.meta.nodeCount); // Total nodes traversed
```

---

### related()

Find observations directly connected to a given observation via relationships. Returns related events grouped by source system.

```typescript
const response = await client.related(input: RelatedInput): Promise<RelatedResponse>
```

#### RelatedInput

| Property | Type | Required | Description |
|----------|------|----------|-------------|
| `id` | `string` | Yes | Observation ID to find related events for |

#### RelatedResponse

```typescript
interface RelatedResponse {
  data: {
    source: {
      id: string;
      title: string;
      source: string;
    };
    related: Array<{
      id: string;
      title: string;
      source: string;
      type: string;
      occurredAt: string | null;
      url: string | null;
      relationshipType: string;
      direction: "outgoing" | "incoming";
    }>;
    bySource: Record<string, RelatedEvent[]>;
  };
  meta: {
    total: number;
    took: number;
  };
  requestId: string;
}
```

#### Example

```typescript
const related = await client.related({
  id: "obs_abc123",
});

console.log(related.data.related); // All related events
console.log(related.data.bySource); // Events grouped by source
console.log(related.meta.total); // Total related events found
```

---

## Error Classes

The SDK exports typed error classes for handling specific error conditions.

```typescript
import {
  AuthenticationError,
  ValidationError,
  NotFoundError,
  RateLimitError,
  NetworkError,
  ServerError,
} from "lightfast";
```

| Error Class | HTTP Status | Description |
|-------------|-------------|-------------|
| `AuthenticationError` | 401 | Invalid or expired API key |
| `ValidationError` | 400 | Invalid request parameters. Access `error.details` for field-specific errors |
| `NotFoundError` | 404 | Resource not found |
| `RateLimitError` | 429 | Too many requests. Access `error.retryAfter` for retry delay in seconds |
| `ServerError` | 500, 502, 503, 504 | Internal server error or service unavailable |
| `NetworkError` | - | Connection or timeout error |

---

## Type Exports

All request and response types are exported:

```typescript
import type {
  LightfastConfig,
  SearchInput,
  SearchFilters,
  V1SearchResponse,
  V1SearchResult,
  ContentsInput,
  V1ContentsResponse,
  V1ContentItem,
  FindSimilarInput,
  V1FindSimilarResponse,
  V1SimilarResult,
  GraphInput,
  GraphResponse,
  RelatedInput,
  RelatedResponse,
} from "lightfast";
```

---

## Related

- [TypeScript SDK Tutorial](/docs/integrate/sdk) - Getting started guide with examples
- [POST /v1/search](/docs/api-reference/endpoints/search) - REST API endpoint reference
- [GitHub Repository](https://github.com/lightfastai/lightfast/tree/main/core/lightfast) - SDK source code
