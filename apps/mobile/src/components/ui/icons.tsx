import { StyleSheet } from "react-native";
import type { ColorValue, StyleProp } from "react-native";
import Svg, { Path } from "react-native-svg";
import type { SvgProps } from "react-native-svg";

type IconProps = SvgProps;

const resolveFill = (
  color: ColorValue | undefined,
  fill: ColorValue | undefined,
  style?: StyleProp<unknown>,
  fallback: ColorValue = "#000",
) => {
  const flattened = StyleSheet.flatten(style) as { color?: ColorValue } | undefined;
  return color ?? fill ?? flattened?.color ?? fallback;
};

export function LogoIcon({ color, style, fill, ...props }: IconProps) {
  const fillColor = resolveFill(color, fill, style);

  return (
    <Svg
      width={136}
      height={17}
      viewBox="0 0 136 17"
      fill="none"
      style={style}
      {...props}
    >
      <Path
        d="M33.6895 -1.14441e-05C35.0233 -1.14441e-05 36.1471 0.224414 37.0605 0.673817C37.9884 1.10876 38.7283 1.73208 39.2793 2.54393C39.8303 3.3559 40.2151 4.31309 40.4326 5.41503L37.0176 5.56737C36.8581 4.71195 36.5171 4.03788 35.9951 3.54491C35.4877 3.03749 34.7267 2.78327 33.7119 2.78319C32.8275 2.78319 32.0876 3.01557 31.4932 3.47948C30.9132 3.94348 30.4775 4.57456 30.1875 5.37206C29.9121 6.16947 29.7744 7.07597 29.7744 8.09081C29.7744 9.12014 29.9121 10.0336 30.1875 10.831C30.4775 11.614 30.9132 12.2302 31.4932 12.6797C32.0876 13.1291 32.8486 13.3544 33.7764 13.3545C34.4578 13.3545 35.0451 13.2159 35.5381 12.9404C36.0456 12.6649 36.4374 12.2881 36.7129 11.8096C37.0028 11.3311 37.1773 10.7876 37.2354 10.1787H33.7119V7.76464H40.4756V15.79H38.4316L38.3145 13.5898C38.1527 13.9019 37.946 14.1933 37.6914 14.4629C37.1984 14.9849 36.5893 15.3986 35.8643 15.7031C35.1539 15.993 34.3639 16.1377 33.4941 16.1377C32.0008 16.1377 30.7245 15.7976 29.666 15.1162C28.6075 14.4347 27.788 13.4916 27.208 12.2881C26.6426 11.0702 26.3604 9.67109 26.3604 8.09081C26.3604 6.53946 26.6496 5.15442 27.2295 3.93651C27.8095 2.71851 28.6439 1.76142 29.7314 1.06542C30.8334 0.355006 32.1526 2.38227e-05 33.6895 -1.14441e-05ZM113.529 -1.14441e-05C114.805 2.25964e-05 115.885 0.224405 116.77 0.673817C117.654 1.1233 118.343 1.73949 118.836 2.52245C119.343 3.30545 119.648 4.20471 119.749 5.21972L116.443 5.39354C116.4 4.85724 116.255 4.39335 116.009 4.00194C115.762 3.59594 115.428 3.28389 115.008 3.06639C114.587 2.84893 114.08 2.74022 113.485 2.74022C112.731 2.74025 112.137 2.90681 111.702 3.24022C111.282 3.57365 111.071 4.00858 111.071 4.54491C111.071 4.92191 111.166 5.24094 111.354 5.50194C111.557 5.74843 111.884 5.96677 112.333 6.15526C112.797 6.34369 113.449 6.5243 114.29 6.69823C115.726 6.98823 116.857 7.35811 117.684 7.80761C118.524 8.24259 119.119 8.76506 119.467 9.37401C119.815 9.98297 119.988 10.679 119.988 11.4619C119.988 12.4189 119.742 13.2524 119.249 13.9629C118.771 14.6589 118.082 15.1953 117.183 15.5723C116.298 15.9492 115.247 16.1377 114.029 16.1377C112.695 16.1377 111.55 15.9133 110.593 15.4639C109.636 15.0144 108.889 14.3833 108.353 13.5713C107.816 12.7593 107.512 11.8021 107.439 10.7002L110.767 10.5478C110.854 11.1568 111.028 11.6792 111.289 12.1142C111.565 12.5346 111.927 12.8538 112.376 13.0713C112.84 13.2888 113.406 13.3974 114.073 13.3974C114.624 13.3974 115.088 13.3326 115.465 13.2021C115.856 13.0716 116.153 12.8752 116.356 12.6142C116.559 12.3388 116.661 12.0056 116.661 11.6142C116.661 11.2518 116.574 10.9397 116.4 10.6787C116.226 10.4032 115.892 10.1569 115.399 9.93944C114.906 9.70745 114.182 9.48213 113.225 9.26464C111.905 8.96016 110.839 8.62011 110.027 8.24315C109.23 7.86615 108.65 7.39459 108.287 6.82909C107.925 6.24915 107.743 5.52416 107.743 4.65429C107.743 3.72629 107.968 2.91376 108.418 2.21776C108.882 1.5219 109.549 0.97835 110.419 0.586903C111.289 0.195437 112.326 -1.14441e-05 113.529 -1.14441e-05ZM3.30566 13.0058H10.418V15.79H0V0.347645H3.30566V13.0058ZM17.6865 15.79H14.4678L19.7812 0.353504H23L17.6865 15.79ZM48.5947 6.6328H54.4453V0.347645H57.751V15.79H54.4453V9.41698H48.5947V15.79H45.2881V0.347645H48.5947V6.6328ZM73.7246 3.13182H69.0918V15.79H65.7637V3.13182H61.1523V0.347645H73.7246V3.13182ZM87.9717 3.13182H80.6201V6.87206H87.5811V9.61327H80.6201V15.79H77.3145V0.347645H87.9717V3.13182ZM104.623 15.79H101.187L100.056 12.5058H94.1172L92.9863 15.79H89.5723L95.1396 0.347645H99.0547L104.623 15.79ZM135.228 3.13182H130.595V15.79H127.267V3.13182H122.656V0.347645H135.228V3.13182ZM95.0527 9.7871H99.1416L97.0977 3.82714L95.0527 9.7871Z"
        fill={fillColor}
      />
    </Svg>
  );
}

export function LogoShortIcon({ color, style, fill, ...props }: IconProps) {
  const fillColor = resolveFill(color, fill, style);

  return (
    <Svg
      width={28}
      height={16}
      viewBox="0 0 28 16"
      fill="none"
      style={style}
      {...props}
    >
      <Path
        d="M0.00254059 15.9114V0.468937H3.30854V15.0197L1.48154 13.1274H10.4208V15.9114H0.00254059Z"
        fill={fillColor}
      />
      <Path
        d="M18.1709 15.8683H14.3535L23.2735 0.418152H27.0909L18.1709 15.8683Z"
        fill={fillColor}
      />
    </Svg>
  );
}

export function GoogleIcon({ style, ...props }: IconProps) {
  return (
    <Svg
      width={24}
      height={24}
      viewBox="0 0 24 24"
      style={style}
      {...props}
    >
      <Path
        d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"
        fill="#4285F4"
      />
      <Path
        d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"
        fill="#34A853"
      />
      <Path
        d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"
        fill="#FBBC05"
      />
      <Path
        d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"
        fill="#EA4335"
      />
    </Svg>
  );
}

export function GithubIcon({ color, style, fill, ...props }: IconProps) {
  const fillColor = resolveFill(color, fill, style, "#fff");

  return (
    <Svg
      width={24}
      height={24}
      viewBox="0 0 24 24"
      style={style}
      {...props}
    >
      <Path
        d="M12 0C5.372 0 0 5.37 0 12c0 5.3 3.438 9.8 8.208 11.387.6.111.792-.261.792-.582 0-.288-.012-1.236-.018-2.244-3.338.726-4.042-1.608-4.042-1.608-.546-1.386-1.332-1.756-1.332-1.756-1.089-.744.084-.729.084-.729 1.203.084 1.836 1.236 1.836 1.236 1.071 1.836 2.808 1.305 3.492.996.108-.777.42-1.305.762-1.605-2.664-.303-5.466-1.332-5.466-5.928 0-1.308.468-2.382 1.236-3.219-.123-.303-.534-1.521.117-3.174 0 0 1.008-.321 3.3 1.23.96-.267 1.992-.399 3.012-.405 1.02.006 2.052.138 3.012.405 2.292-1.551 3.3-1.23 3.3-1.23.651 1.653.24 2.871.117 3.174.768.837 1.236 1.911 1.236 3.219 0 4.608-2.808 5.619-5.478 5.916.432.372.816 1.107.816 2.235 0 1.611-.015 2.907-.015 3.303 0 .321.192.699.798.579C20.565 21.795 24 17.295 24 12c0-6.63-5.373-12-12-12Z"
        fill={fillColor}
      />
    </Svg>
  );
}

export const Icons = {
  logo: LogoIcon,
  logoShort: LogoShortIcon,
  google: GoogleIcon,
  github: GithubIcon,
} as const;
