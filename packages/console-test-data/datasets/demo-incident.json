{
  "$schema": "./webhook-schema.json",
  "name": "demo-incident",
  "description": "Cross-source production incident storyline for accelerator demo - showcases Sentry + Linear + GitHub + Vercel integration",
  "webhooks": [
    {
      "source": "sentry",
      "eventType": "issue.created",
      "payload": {
        "action": "created",
        "data": {
          "issue": {
            "id": "4821593046",
            "shortId": "CHECKOUT-123",
            "title": "TypeError: price.toFixed is not a function",
            "culprit": "PriceCalculator.calculateTotal (checkout/PriceCalculator.ts)",
            "status": "unresolved",
            "level": "error",
            "platform": "javascript",
            "firstSeen": "2024-01-15T08:30:00Z",
            "lastSeen": "2024-01-15T08:45:00Z",
            "count": 47,
            "userCount": 23,
            "permalink": "https://sentry.io/organizations/acme/issues/4821593046/",
            "metadata": {
              "type": "TypeError",
              "value": "price.toFixed is not a function",
              "filename": "checkout/PriceCalculator.ts",
              "function": "calculateTotal"
            },
            "project": {
              "id": "6431298",
              "name": "acme-platform",
              "slug": "acme-platform"
            },
            "assignedTo": null,
            "logger": "javascript",
            "type": "error",
            "annotations": [],
            "isPublic": false,
            "isBookmarked": false,
            "isSubscribed": true,
            "hasSeen": false,
            "numComments": 0
          }
        },
        "installation": {
          "uuid": "sentry-install-acme-001"
        },
        "actor": {
          "type": "application",
          "id": "sentry",
          "name": "Sentry"
        }
      }
    },
    {
      "source": "sentry",
      "eventType": "event_alert",
      "payload": {
        "action": "triggered",
        "data": {
          "event": {
            "event_id": "evt_checkout_fail_001",
            "project": 6431298,
            "timestamp": "2024-01-15T08:32:00Z",
            "received": "2024-01-15T08:32:01Z",
            "platform": "javascript",
            "message": "TypeError: price.toFixed is not a function",
            "title": "TypeError: price.toFixed is not a function",
            "location": "checkout/PriceCalculator.ts",
            "culprit": "calculateTotal",
            "type": "error",
            "metadata": {
              "type": "TypeError",
              "value": "price.toFixed is not a function",
              "filename": "checkout/PriceCalculator.ts",
              "function": "calculateTotal"
            },
            "tags": [
              { "key": "environment", "value": "production" },
              { "key": "release", "value": "v2.4.1" },
              { "key": "browser", "value": "Chrome 120" },
              { "key": "url", "value": "/checkout" }
            ],
            "user": {
              "id": "user_12345",
              "email": "customer@example.com",
              "ip_address": "192.168.1.1"
            },
            "sdk": {
              "name": "sentry.javascript.nextjs",
              "version": "7.91.0"
            },
            "exception": {
              "values": [
                {
                  "type": "TypeError",
                  "value": "price.toFixed is not a function",
                  "stacktrace": {
                    "frames": [
                      {
                        "filename": "checkout/CheckoutForm.tsx",
                        "function": "handleSubmit",
                        "lineno": 89,
                        "colno": 15,
                        "context_line": "    const total = priceCalculator.calculateTotal(items, discount);"
                      },
                      {
                        "filename": "checkout/PriceCalculator.ts",
                        "function": "calculateTotal",
                        "lineno": 142,
                        "colno": 28,
                        "context_line": "    return price.toFixed(2);"
                      }
                    ]
                  }
                }
              ]
            },
            "web_url": "https://sentry.io/organizations/acme/issues/4821593046/events/evt_checkout_fail_001/",
            "issue_url": "https://sentry.io/api/0/issues/4821593046/"
          },
          "triggered_rule": "High Error Volume - Checkout"
        },
        "installation": {
          "uuid": "sentry-install-acme-001"
        }
      }
    },
    {
      "source": "linear",
      "eventType": "Issue",
      "payload": {
        "action": "create",
        "type": "Issue",
        "createdAt": "2024-01-15T08:50:00Z",
        "organizationId": "org_acme_linear_001",
        "webhookId": "webhook_acme_001",
        "webhookTimestamp": 1705308600000,
        "data": {
          "id": "issue_lin_892",
          "identifier": "LIN-892",
          "title": "Critical: Checkout TypeError blocking all purchases",
          "description": "## Incident\nSentry reported TypeError in checkout flow affecting production users.\n\n## Sentry Reference\n- Issue: CHECKOUT-123\n- 47 errors, 23 affected users\n- First seen: 08:30 UTC\n\n## Stack Trace\n```\nTypeError: price.toFixed is not a function\n    at PriceCalculator.calculateTotal (checkout/PriceCalculator.ts:142)\n```\n\n## Root Cause Analysis Needed\n- Why is price null/undefined?\n- Check discount API response handling\n\n## Impact\n- P0 - All checkouts failing\n- Revenue impact estimated",
          "priority": 1,
          "priorityLabel": "Urgent",
          "estimate": 2,
          "boardOrder": 0,
          "sortOrder": 0,
          "createdAt": "2024-01-15T08:50:00Z",
          "updatedAt": "2024-01-15T08:50:00Z",
          "number": 892,
          "url": "https://linear.app/acme/issue/LIN-892",
          "branchName": "lin-892-checkout-typeerror",
          "customerTicketCount": 5,
          "previousIdentifiers": [],
          "team": {
            "id": "team_platform",
            "key": "LIN",
            "name": "Platform"
          },
          "state": {
            "id": "state_todo",
            "name": "Todo",
            "color": "#e2e2e2",
            "type": "unstarted"
          },
          "creator": {
            "id": "user_bob_linear",
            "name": "Bob Johnson",
            "displayName": "Bob Johnson",
            "email": "bob@acme.com",
            "avatarUrl": "https://avatars.example.com/bob",
            "isMe": false,
            "active": true
          },
          "assignee": {
            "id": "user_alice_linear",
            "name": "Alice Chen",
            "displayName": "Alice Chen",
            "email": "alice@acme.com",
            "avatarUrl": "https://avatars.example.com/alice",
            "isMe": false,
            "active": true
          },
          "project": {
            "id": "proj_q1_2024",
            "name": "Q1 2024 Platform",
            "url": "https://linear.app/acme/project/q1-2024-platform"
          },
          "cycle": {
            "id": "cycle_sprint_3",
            "name": "Sprint 3",
            "number": 3
          },
          "labels": [
            {
              "id": "label_bug",
              "name": "Bug",
              "color": "#d73a4a"
            },
            {
              "id": "label_p0",
              "name": "P0",
              "color": "#000000"
            },
            {
              "id": "label_checkout",
              "name": "Checkout",
              "color": "#0052cc"
            }
          ],
          "subscriberIds": [
            "user_alice_linear",
            "user_bob_linear",
            "user_charlie_linear"
          ]
        }
      }
    },
    {
      "source": "linear",
      "eventType": "Comment",
      "payload": {
        "action": "create",
        "type": "Comment",
        "createdAt": "2024-01-15T09:05:00Z",
        "organizationId": "org_acme_linear_001",
        "webhookId": "webhook_acme_001",
        "webhookTimestamp": 1705309500000,
        "data": {
          "id": "comment_lin_892_001",
          "body": "Found the root cause - the `discount` field from the pricing API can be `null` when no discount applies. We're calling `.toFixed()` directly without checking. Quick fix incoming.\n\nGoing to create branch `fix/checkout-null-price` and push a PR.",
          "createdAt": "2024-01-15T09:05:00Z",
          "updatedAt": "2024-01-15T09:05:00Z",
          "url": "https://linear.app/acme/issue/LIN-892#comment-comment_lin_892_001",
          "reactionData": [],
          "user": {
            "id": "user_alice_linear",
            "name": "Alice Chen",
            "displayName": "Alice Chen",
            "email": "alice@acme.com",
            "avatarUrl": "https://avatars.example.com/alice",
            "isMe": false,
            "active": true
          },
          "issue": {
            "id": "issue_lin_892",
            "identifier": "LIN-892",
            "title": "Critical: Checkout TypeError blocking all purchases",
            "url": "https://linear.app/acme/issue/LIN-892"
          }
        }
      }
    },
    {
      "source": "github",
      "eventType": "issues",
      "payload": {
        "action": "opened",
        "issue": {
          "id": 987654500,
          "node_id": "I_kwDOacme_issue_500",
          "number": 500,
          "title": "Bug: Checkout failing with TypeError in price calculation",
          "user": {
            "login": "bob",
            "id": 23456,
            "node_id": "U_bob",
            "avatar_url": "https://avatars.githubusercontent.com/u/23456",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 5,
              "node_id": "L_5",
              "name": "bug",
              "color": "d73a4a",
              "default": false
            },
            {
              "id": 6,
              "node_id": "L_6",
              "name": "critical",
              "color": "000000",
              "default": false
            }
          ],
          "state": "open",
          "locked": false,
          "assignee": {
            "login": "alice",
            "id": 12345,
            "node_id": "U_alice",
            "avatar_url": "https://avatars.githubusercontent.com/u/12345",
            "type": "User",
            "site_admin": false
          },
          "assignees": [
            {
              "login": "alice",
              "id": 12345,
              "node_id": "U_alice",
              "avatar_url": "https://avatars.githubusercontent.com/u/12345",
              "type": "User",
              "site_admin": false
            }
          ],
          "milestone": null,
          "comments": 0,
          "created_at": "2024-01-15T09:00:00Z",
          "updated_at": "2024-01-15T09:00:00Z",
          "closed_at": null,
          "author_association": "MEMBER",
          "active_lock_reason": null,
          "body": "## Problem\nUsers reporting checkout failures in production. Multiple Sentry alerts for TypeError.\n\n## Stack Trace (from Sentry CHECKOUT-123)\n```\nTypeError: price.toFixed is not a function\n    at PriceCalculator.calculateTotal (checkout/PriceCalculator.ts:142)\n    at CheckoutForm.handleSubmit (checkout/CheckoutForm.tsx:89)\n```\n\n## Impact\n- 47 errors in last hour\n- 23 affected users\n- Checkout completely blocked\n\n## Related\n- Sentry Issue: CHECKOUT-123\n- Linear: LIN-892\n\n## Environment\nProduction (vercel deployment dpl_prod_abc123)",
          "reactions": {
            "url": "https://api.github.com/repos/acme/platform/issues/500/reactions",
            "total_count": 3,
            "+1": 3,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
          },
          "html_url": "https://github.com/acme/platform/issues/500",
          "timeline_url": "https://api.github.com/repos/acme/platform/issues/500/timeline",
          "state_reason": null
        },
        "repository": {
          "id": 345679,
          "node_id": "R_acme_platform",
          "name": "platform",
          "full_name": "acme/platform",
          "private": false,
          "owner": {
            "login": "acme",
            "id": 22223,
            "node_id": "O_acme",
            "avatar_url": "https://avatars.githubusercontent.com/u/22223",
            "type": "Organization",
            "site_admin": false
          },
          "html_url": "https://github.com/acme/platform",
          "description": "ACME Platform - E-commerce checkout system",
          "fork": false,
          "url": "https://api.github.com/repos/acme/platform",
          "created_at": "2023-01-01T00:00:00Z",
          "updated_at": "2024-01-15T00:00:00Z",
          "pushed_at": "2024-01-15T00:00:00Z",
          "homepage": "https://acme.com",
          "size": 5000,
          "stargazers_count": 150,
          "watchers_count": 150,
          "language": "TypeScript",
          "forks_count": 25,
          "open_issues_count": 12,
          "default_branch": "main",
          "topics": ["ecommerce", "checkout", "typescript"],
          "visibility": "public"
        },
        "sender": {
          "login": "bob",
          "id": 23456,
          "node_id": "U_bob",
          "avatar_url": "https://avatars.githubusercontent.com/u/23456",
          "type": "User",
          "site_admin": false
        }
      }
    },
    {
      "source": "linear",
      "eventType": "Issue",
      "payload": {
        "action": "update",
        "type": "Issue",
        "createdAt": "2024-01-15T09:15:00Z",
        "organizationId": "org_acme_linear_001",
        "webhookId": "webhook_acme_001",
        "webhookTimestamp": 1705310100000,
        "data": {
          "id": "issue_lin_892",
          "identifier": "LIN-892",
          "title": "Critical: Checkout TypeError blocking all purchases",
          "description": "## Incident\nSentry reported TypeError in checkout flow affecting production users.\n\n## Sentry Reference\n- Issue: CHECKOUT-123\n- 47 errors, 23 affected users\n- First seen: 08:30 UTC\n\n## Stack Trace\n```\nTypeError: price.toFixed is not a function\n    at PriceCalculator.calculateTotal (checkout/PriceCalculator.ts:142)\n```\n\n## Root Cause Analysis Needed\n- Why is price null/undefined?\n- Check discount API response handling\n\n## Impact\n- P0 - All checkouts failing\n- Revenue impact estimated",
          "priority": 1,
          "priorityLabel": "Urgent",
          "estimate": 2,
          "boardOrder": 0,
          "sortOrder": 0,
          "startedAt": "2024-01-15T09:15:00Z",
          "createdAt": "2024-01-15T08:50:00Z",
          "updatedAt": "2024-01-15T09:15:00Z",
          "number": 892,
          "url": "https://linear.app/acme/issue/LIN-892",
          "branchName": "lin-892-checkout-typeerror",
          "customerTicketCount": 5,
          "previousIdentifiers": [],
          "team": {
            "id": "team_platform",
            "key": "LIN",
            "name": "Platform"
          },
          "state": {
            "id": "state_in_progress",
            "name": "In Progress",
            "color": "#f2c94c",
            "type": "started"
          },
          "creator": {
            "id": "user_bob_linear",
            "name": "Bob Johnson",
            "displayName": "Bob Johnson",
            "email": "bob@acme.com",
            "avatarUrl": "https://avatars.example.com/bob",
            "isMe": false,
            "active": true
          },
          "assignee": {
            "id": "user_alice_linear",
            "name": "Alice Chen",
            "displayName": "Alice Chen",
            "email": "alice@acme.com",
            "avatarUrl": "https://avatars.example.com/alice",
            "isMe": false,
            "active": true
          },
          "project": {
            "id": "proj_q1_2024",
            "name": "Q1 2024 Platform",
            "url": "https://linear.app/acme/project/q1-2024-platform"
          },
          "cycle": {
            "id": "cycle_sprint_3",
            "name": "Sprint 3",
            "number": 3
          },
          "labels": [
            { "id": "label_bug", "name": "Bug", "color": "#d73a4a" },
            { "id": "label_p0", "name": "P0", "color": "#000000" },
            { "id": "label_checkout", "name": "Checkout", "color": "#0052cc" }
          ],
          "subscriberIds": [
            "user_alice_linear",
            "user_bob_linear",
            "user_charlie_linear"
          ]
        },
        "updatedFrom": {
          "stateId": "state_todo",
          "startedAt": null
        }
      }
    },
    {
      "source": "github",
      "eventType": "pull_request",
      "payload": {
        "action": "opened",
        "number": 478,
        "pull_request": {
          "id": 3234567999,
          "node_id": "PR_kwDOacme_platform478",
          "number": 478,
          "state": "open",
          "locked": false,
          "title": "fix: Handle null prices in checkout calculation",
          "user": {
            "login": "alice",
            "id": 12345,
            "node_id": "U_alice",
            "avatar_url": "https://avatars.githubusercontent.com/u/12345",
            "type": "User",
            "site_admin": false
          },
          "body": "## Summary\nFixes TypeError when price is null or undefined during checkout calculation.\n\n## Root Cause\nThe `discount` field from the pricing API can be `null` when no discount applies, but `PriceCalculator.calculateTotal()` was calling `.toFixed()` directly without null check.\n\n## Solution\n- Added null coalescing for discount value: `discount ?? 0`\n- Added TypeScript strict null checks to prevent future issues\n- Added defensive validation for all price inputs\n\n## Testing\n- [x] Unit tests for PriceCalculator with null/undefined inputs\n- [x] Integration test for checkout flow\n- [x] Manually verified in staging\n\n## Related Issues\n- Fixes #500\n- Fixes LIN-892\n- Resolves Sentry CHECKOUT-123\n\n## Deployment Note\nThis is a **critical hotfix** - please prioritize review and merge.",
          "created_at": "2024-01-15T11:30:00Z",
          "updated_at": "2024-01-15T11:30:00Z",
          "closed_at": null,
          "merged_at": null,
          "merge_commit_sha": null,
          "assignee": null,
          "assignees": [],
          "requested_reviewers": [
            {
              "login": "charlie",
              "id": 34567,
              "node_id": "U_charlie",
              "avatar_url": "https://avatars.githubusercontent.com/u/34567",
              "type": "User",
              "site_admin": false
            }
          ],
          "requested_teams": [],
          "labels": [
            {
              "id": 5,
              "node_id": "L_5",
              "name": "bug",
              "color": "d73a4a",
              "default": false
            },
            {
              "id": 7,
              "node_id": "L_7",
              "name": "hotfix",
              "color": "ff0000",
              "default": false
            }
          ],
          "milestone": null,
          "draft": false,
          "commits": 2,
          "additions": 45,
          "deletions": 8,
          "changed_files": 3,
          "head": {
            "label": "acme:fix/checkout-null-price",
            "ref": "fix/checkout-null-price",
            "sha": "fix478sha123",
            "user": {
              "login": "alice",
              "id": 12345,
              "node_id": "U_alice",
              "avatar_url": "https://avatars.githubusercontent.com/u/12345",
              "type": "User",
              "site_admin": false
            },
            "repo": {
              "id": 345679,
              "node_id": "R_acme_platform",
              "name": "platform",
              "full_name": "acme/platform",
              "private": false,
              "owner": {
                "login": "acme",
                "id": 22223,
                "node_id": "O_acme",
                "avatar_url": "https://avatars.githubusercontent.com/u/22223",
                "type": "Organization",
                "site_admin": false
              },
              "html_url": "https://github.com/acme/platform",
              "description": "ACME Platform - E-commerce checkout system",
              "fork": false,
              "url": "https://api.github.com/repos/acme/platform",
              "created_at": "2023-01-01T00:00:00Z",
              "updated_at": "2024-01-15T00:00:00Z",
              "pushed_at": "2024-01-15T00:00:00Z",
              "homepage": "https://acme.com",
              "size": 5000,
              "stargazers_count": 150,
              "watchers_count": 150,
              "language": "TypeScript",
              "forks_count": 25,
              "open_issues_count": 12,
              "default_branch": "main",
              "topics": [],
              "visibility": "public"
            }
          },
          "base": {
            "label": "acme:main",
            "ref": "main",
            "sha": "main123sha",
            "user": {
              "login": "acme",
              "id": 22223,
              "node_id": "O_acme",
              "avatar_url": "https://avatars.githubusercontent.com/u/22223",
              "type": "Organization",
              "site_admin": false
            },
            "repo": {
              "id": 345679,
              "node_id": "R_acme_platform",
              "name": "platform",
              "full_name": "acme/platform",
              "private": false,
              "owner": {
                "login": "acme",
                "id": 22223,
                "node_id": "O_acme",
                "avatar_url": "https://avatars.githubusercontent.com/u/22223",
                "type": "Organization",
                "site_admin": false
              },
              "html_url": "https://github.com/acme/platform",
              "description": "ACME Platform - E-commerce checkout system",
              "fork": false,
              "url": "https://api.github.com/repos/acme/platform",
              "created_at": "2023-01-01T00:00:00Z",
              "updated_at": "2024-01-15T00:00:00Z",
              "pushed_at": "2024-01-15T00:00:00Z",
              "homepage": "https://acme.com",
              "size": 5000,
              "stargazers_count": 150,
              "watchers_count": 150,
              "language": "TypeScript",
              "forks_count": 25,
              "open_issues_count": 12,
              "default_branch": "main",
              "topics": [],
              "visibility": "public"
            }
          },
          "html_url": "https://github.com/acme/platform/pull/478",
          "diff_url": "https://github.com/acme/platform/pull/478.diff",
          "patch_url": "https://github.com/acme/platform/pull/478.patch",
          "merged": false,
          "mergeable": true,
          "rebaseable": true,
          "mergeable_state": "clean",
          "merged_by": null,
          "comments": 0,
          "review_comments": 0,
          "maintainer_can_modify": true,
          "author_association": "MEMBER",
          "auto_merge": null,
          "active_lock_reason": null
        },
        "repository": {
          "id": 345679,
          "node_id": "R_acme_platform",
          "name": "platform",
          "full_name": "acme/platform",
          "private": false,
          "owner": {
            "login": "acme",
            "id": 22223,
            "node_id": "O_acme",
            "avatar_url": "https://avatars.githubusercontent.com/u/22223",
            "type": "Organization",
            "site_admin": false
          },
          "html_url": "https://github.com/acme/platform",
          "description": "ACME Platform - E-commerce checkout system",
          "fork": false,
          "url": "https://api.github.com/repos/acme/platform",
          "created_at": "2023-01-01T00:00:00Z",
          "updated_at": "2024-01-15T00:00:00Z",
          "pushed_at": "2024-01-15T00:00:00Z",
          "homepage": "https://acme.com",
          "size": 5000,
          "stargazers_count": 150,
          "watchers_count": 150,
          "language": "TypeScript",
          "forks_count": 25,
          "open_issues_count": 12,
          "default_branch": "main",
          "topics": [],
          "visibility": "public"
        },
        "sender": {
          "login": "alice",
          "id": 12345,
          "node_id": "U_alice",
          "avatar_url": "https://avatars.githubusercontent.com/u/12345",
          "type": "User",
          "site_admin": false
        }
      }
    },
    {
      "source": "github",
      "eventType": "pull_request",
      "payload": {
        "action": "closed",
        "number": 478,
        "pull_request": {
          "id": 3234567999,
          "node_id": "PR_kwDOacme_platform478",
          "number": 478,
          "state": "closed",
          "locked": false,
          "title": "fix: Handle null prices in checkout calculation",
          "user": {
            "login": "alice",
            "id": 12345,
            "node_id": "U_alice",
            "avatar_url": "https://avatars.githubusercontent.com/u/12345",
            "type": "User",
            "site_admin": false
          },
          "body": "## Summary\nFixes TypeError when price is null or undefined during checkout calculation.\n\n## Root Cause\nThe `discount` field from the pricing API can be `null` when no discount applies, but `PriceCalculator.calculateTotal()` was calling `.toFixed()` directly without null check.\n\n## Solution\n- Added null coalescing for discount value: `discount ?? 0`\n- Added TypeScript strict null checks to prevent future issues\n- Added defensive validation for all price inputs\n\n## Testing\n- [x] Unit tests for PriceCalculator with null/undefined inputs\n- [x] Integration test for checkout flow\n- [x] Manually verified in staging\n\n## Related Issues\n- Fixes #500\n- Fixes LIN-892\n- Resolves Sentry CHECKOUT-123\n\n## Deployment Note\nThis is a **critical hotfix** - please prioritize review and merge.",
          "created_at": "2024-01-15T11:30:00Z",
          "updated_at": "2024-01-15T12:00:00Z",
          "closed_at": "2024-01-15T12:00:00Z",
          "merged_at": "2024-01-15T12:00:00Z",
          "merge_commit_sha": "merge478sha456",
          "assignee": null,
          "assignees": [],
          "requested_reviewers": [],
          "requested_teams": [],
          "labels": [
            {
              "id": 5,
              "node_id": "L_5",
              "name": "bug",
              "color": "d73a4a",
              "default": false
            },
            {
              "id": 7,
              "node_id": "L_7",
              "name": "hotfix",
              "color": "ff0000",
              "default": false
            }
          ],
          "milestone": null,
          "draft": false,
          "commits": 2,
          "additions": 45,
          "deletions": 8,
          "changed_files": 3,
          "head": {
            "label": "acme:fix/checkout-null-price",
            "ref": "fix/checkout-null-price",
            "sha": "fix478sha123",
            "user": {
              "login": "alice",
              "id": 12345,
              "node_id": "U_alice",
              "avatar_url": "https://avatars.githubusercontent.com/u/12345",
              "type": "User",
              "site_admin": false
            },
            "repo": {
              "id": 345679,
              "node_id": "R_acme_platform",
              "name": "platform",
              "full_name": "acme/platform",
              "private": false,
              "owner": {
                "login": "acme",
                "id": 22223,
                "node_id": "O_acme",
                "avatar_url": "https://avatars.githubusercontent.com/u/22223",
                "type": "Organization",
                "site_admin": false
              },
              "html_url": "https://github.com/acme/platform",
              "description": "ACME Platform",
              "fork": false,
              "url": "https://api.github.com/repos/acme/platform",
              "created_at": "2023-01-01T00:00:00Z",
              "updated_at": "2024-01-15T00:00:00Z",
              "pushed_at": "2024-01-15T00:00:00Z",
              "homepage": null,
              "size": 5000,
              "stargazers_count": 150,
              "watchers_count": 150,
              "language": "TypeScript",
              "forks_count": 25,
              "open_issues_count": 12,
              "default_branch": "main",
              "topics": [],
              "visibility": "public"
            }
          },
          "base": {
            "label": "acme:main",
            "ref": "main",
            "sha": "main123sha",
            "user": {
              "login": "acme",
              "id": 22223,
              "node_id": "O_acme",
              "avatar_url": "https://avatars.githubusercontent.com/u/22223",
              "type": "Organization",
              "site_admin": false
            },
            "repo": {
              "id": 345679,
              "node_id": "R_acme_platform",
              "name": "platform",
              "full_name": "acme/platform",
              "private": false,
              "owner": {
                "login": "acme",
                "id": 22223,
                "node_id": "O_acme",
                "avatar_url": "https://avatars.githubusercontent.com/u/22223",
                "type": "Organization",
                "site_admin": false
              },
              "html_url": "https://github.com/acme/platform",
              "description": "ACME Platform",
              "fork": false,
              "url": "https://api.github.com/repos/acme/platform",
              "created_at": "2023-01-01T00:00:00Z",
              "updated_at": "2024-01-15T00:00:00Z",
              "pushed_at": "2024-01-15T00:00:00Z",
              "homepage": null,
              "size": 5000,
              "stargazers_count": 150,
              "watchers_count": 150,
              "language": "TypeScript",
              "forks_count": 25,
              "open_issues_count": 12,
              "default_branch": "main",
              "topics": [],
              "visibility": "public"
            }
          },
          "html_url": "https://github.com/acme/platform/pull/478",
          "diff_url": "https://github.com/acme/platform/pull/478.diff",
          "patch_url": "https://github.com/acme/platform/pull/478.patch",
          "merged": true,
          "mergeable": null,
          "rebaseable": null,
          "mergeable_state": "unknown",
          "merged_by": {
            "login": "charlie",
            "id": 34567,
            "node_id": "U_charlie",
            "avatar_url": "https://avatars.githubusercontent.com/u/34567",
            "type": "User",
            "site_admin": false
          },
          "comments": 2,
          "review_comments": 3,
          "maintainer_can_modify": true,
          "author_association": "MEMBER",
          "auto_merge": null,
          "active_lock_reason": null
        },
        "repository": {
          "id": 345679,
          "node_id": "R_acme_platform",
          "name": "platform",
          "full_name": "acme/platform",
          "private": false,
          "owner": {
            "login": "acme",
            "id": 22223,
            "node_id": "O_acme",
            "avatar_url": "https://avatars.githubusercontent.com/u/22223",
            "type": "Organization",
            "site_admin": false
          },
          "html_url": "https://github.com/acme/platform",
          "description": "ACME Platform",
          "fork": false,
          "url": "https://api.github.com/repos/acme/platform",
          "created_at": "2023-01-01T00:00:00Z",
          "updated_at": "2024-01-15T00:00:00Z",
          "pushed_at": "2024-01-15T00:00:00Z",
          "homepage": null,
          "size": 5000,
          "stargazers_count": 150,
          "watchers_count": 150,
          "language": "TypeScript",
          "forks_count": 25,
          "open_issues_count": 12,
          "default_branch": "main",
          "topics": [],
          "visibility": "public"
        },
        "sender": {
          "login": "charlie",
          "id": 34567,
          "node_id": "U_charlie",
          "avatar_url": "https://avatars.githubusercontent.com/u/34567",
          "type": "User",
          "site_admin": false
        }
      }
    },
    {
      "source": "github",
      "eventType": "push",
      "payload": {
        "ref": "refs/heads/main",
        "before": "main123sha",
        "after": "merge478sha456",
        "created": false,
        "deleted": false,
        "forced": false,
        "base_ref": null,
        "compare": "https://github.com/acme/platform/compare/main123sha...merge478sha456",
        "commits": [
          {
            "id": "fix478sha123",
            "tree_id": "tree478",
            "distinct": true,
            "message": "fix: Handle null prices in checkout calculation\n\nAdded null coalescing for discount value to prevent TypeError.\nThis fixes the checkout failures reported in issue #500.\n\nFixes #500\nFixes LIN-892\nResolves Sentry CHECKOUT-123",
            "timestamp": "2024-01-15T11:45:00Z",
            "url": "https://github.com/acme/platform/commit/fix478sha123",
            "author": {
              "name": "Alice Chen",
              "email": "alice@acme.com",
              "username": "alice"
            },
            "committer": {
              "name": "Alice Chen",
              "email": "alice@acme.com",
              "username": "alice"
            },
            "added": [],
            "removed": [],
            "modified": [
              "src/checkout/PriceCalculator.ts",
              "src/checkout/PriceCalculator.test.ts",
              "src/checkout/types.ts"
            ]
          },
          {
            "id": "merge478sha456",
            "tree_id": "tree478merge",
            "distinct": true,
            "message": "Merge pull request #478 from acme/fix/checkout-null-price\n\nfix: Handle null prices in checkout calculation",
            "timestamp": "2024-01-15T12:00:00Z",
            "url": "https://github.com/acme/platform/commit/merge478sha456",
            "author": {
              "name": "Charlie Davis",
              "email": "charlie@acme.com",
              "username": "charlie"
            },
            "committer": {
              "name": "GitHub",
              "email": "noreply@github.com",
              "username": "web-flow"
            },
            "added": [],
            "removed": [],
            "modified": [
              "src/checkout/PriceCalculator.ts",
              "src/checkout/PriceCalculator.test.ts",
              "src/checkout/types.ts"
            ]
          }
        ],
        "head_commit": {
          "id": "merge478sha456",
          "tree_id": "tree478merge",
          "distinct": true,
          "message": "Merge pull request #478 from acme/fix/checkout-null-price\n\nfix: Handle null prices in checkout calculation",
          "timestamp": "2024-01-15T12:00:00Z",
          "url": "https://github.com/acme/platform/commit/merge478sha456",
          "author": {
            "name": "Charlie Davis",
            "email": "charlie@acme.com",
            "username": "charlie"
          },
          "committer": {
            "name": "GitHub",
            "email": "noreply@github.com",
            "username": "web-flow"
          },
          "added": [],
          "removed": [],
          "modified": [
            "src/checkout/PriceCalculator.ts",
            "src/checkout/PriceCalculator.test.ts",
            "src/checkout/types.ts"
          ]
        },
        "repository": {
          "id": 345679,
          "node_id": "R_acme_platform",
          "name": "platform",
          "full_name": "acme/platform",
          "private": false,
          "owner": {
            "login": "acme",
            "id": 22223,
            "node_id": "O_acme",
            "avatar_url": "https://avatars.githubusercontent.com/u/22223",
            "type": "Organization",
            "site_admin": false
          },
          "html_url": "https://github.com/acme/platform",
          "description": "ACME Platform",
          "fork": false,
          "url": "https://api.github.com/repos/acme/platform",
          "created_at": "2023-01-01T00:00:00Z",
          "updated_at": "2024-01-15T00:00:00Z",
          "pushed_at": "2024-01-15T12:00:00Z",
          "homepage": null,
          "size": 5000,
          "stargazers_count": 150,
          "watchers_count": 150,
          "language": "TypeScript",
          "forks_count": 25,
          "open_issues_count": 11,
          "default_branch": "main",
          "topics": [],
          "visibility": "public"
        },
        "pusher": { "name": "charlie", "email": "charlie@acme.com" },
        "sender": {
          "login": "charlie",
          "id": 34567,
          "node_id": "U_charlie",
          "avatar_url": "https://avatars.githubusercontent.com/u/34567",
          "type": "User",
          "site_admin": false
        }
      }
    },
    {
      "source": "vercel",
      "eventType": "deployment.created",
      "payload": {
        "id": "hook_checkout_fix_001",
        "type": "deployment.created",
        "createdAt": 1705320300000,
        "region": "sfo1",
        "payload": {
          "deployment": {
            "id": "dpl_hotfix_478_abc",
            "name": "acme-platform",
            "url": "acme-platform-hotfix-478.vercel.app",
            "readyState": "BUILDING",
            "meta": {
              "githubCommitSha": "merge478sha456",
              "githubCommitRef": "main",
              "githubCommitMessage": "Merge pull request #478 from acme/fix/checkout-null-price\n\nfix: Handle null prices in checkout calculation",
              "githubCommitAuthorName": "Charlie Davis",
              "githubCommitAuthorLogin": "charlie",
              "githubPrId": "478",
              "githubOrg": "acme",
              "githubRepo": "platform",
              "githubDeployment": "1"
            }
          },
          "project": { "id": "prj_acme_platform_123", "name": "acme-platform" },
          "team": {
            "id": "team_acme_prod",
            "slug": "acme",
            "name": "ACME Corp"
          }
        }
      }
    },
    {
      "source": "vercel",
      "eventType": "deployment.succeeded",
      "payload": {
        "id": "hook_checkout_fix_002",
        "type": "deployment.succeeded",
        "createdAt": 1705320600000,
        "region": "sfo1",
        "payload": {
          "deployment": {
            "id": "dpl_hotfix_478_abc",
            "name": "acme-platform",
            "url": "acme-platform.vercel.app",
            "readyState": "READY",
            "meta": {
              "githubCommitSha": "merge478sha456",
              "githubCommitRef": "main",
              "githubCommitMessage": "Merge pull request #478 from acme/fix/checkout-null-price\n\nfix: Handle null prices in checkout calculation",
              "githubCommitAuthorName": "Charlie Davis",
              "githubCommitAuthorLogin": "charlie",
              "githubPrId": "478",
              "githubOrg": "acme",
              "githubRepo": "platform",
              "githubDeployment": "1"
            }
          },
          "project": { "id": "prj_acme_platform_123", "name": "acme-platform" },
          "team": {
            "id": "team_acme_prod",
            "slug": "acme",
            "name": "ACME Corp"
          }
        }
      }
    },
    {
      "source": "sentry",
      "eventType": "issue.resolved",
      "payload": {
        "action": "resolved",
        "data": {
          "issue": {
            "id": "4821593046",
            "shortId": "CHECKOUT-123",
            "title": "TypeError: price.toFixed is not a function",
            "culprit": "PriceCalculator.calculateTotal (checkout/PriceCalculator.ts)",
            "status": "resolved",
            "level": "error",
            "platform": "javascript",
            "firstSeen": "2024-01-15T08:30:00Z",
            "lastSeen": "2024-01-15T12:05:00Z",
            "count": 52,
            "userCount": 28,
            "permalink": "https://sentry.io/organizations/acme/issues/4821593046/",
            "metadata": {
              "type": "TypeError",
              "value": "price.toFixed is not a function",
              "filename": "checkout/PriceCalculator.ts",
              "function": "calculateTotal"
            },
            "project": {
              "id": "6431298",
              "name": "acme-platform",
              "slug": "acme-platform"
            },
            "assignedTo": {
              "id": "user_alice_sentry",
              "name": "Alice Chen",
              "email": "alice@acme.com"
            },
            "statusDetails": {
              "inCommit": {
                "repository": "acme/platform",
                "commit": "merge478sha456"
              },
              "inRelease": "v2.4.2",
              "inNextRelease": false
            },
            "logger": "javascript",
            "type": "error",
            "annotations": [],
            "isPublic": false,
            "isBookmarked": false,
            "isSubscribed": true,
            "hasSeen": true,
            "numComments": 2
          }
        },
        "installation": {
          "uuid": "sentry-install-acme-001"
        },
        "actor": {
          "type": "user",
          "id": "user_alice_sentry",
          "name": "Alice Chen",
          "email": "alice@acme.com"
        }
      }
    },
    {
      "source": "linear",
      "eventType": "Issue",
      "payload": {
        "action": "update",
        "type": "Issue",
        "createdAt": "2024-01-15T12:45:00Z",
        "organizationId": "org_acme_linear_001",
        "webhookId": "webhook_acme_001",
        "webhookTimestamp": 1705322700000,
        "data": {
          "id": "issue_lin_892",
          "identifier": "LIN-892",
          "title": "Critical: Checkout TypeError blocking all purchases",
          "description": "## Incident\nSentry reported TypeError in checkout flow affecting production users.\n\n## Sentry Reference\n- Issue: CHECKOUT-123\n- 47 errors, 23 affected users\n- First seen: 08:30 UTC\n\n## Stack Trace\n```\nTypeError: price.toFixed is not a function\n    at PriceCalculator.calculateTotal (checkout/PriceCalculator.ts:142)\n```\n\n## Resolution\n- Root cause: discount field from pricing API can be null\n- Fix: Added null coalescing `discount ?? 0`\n- PR #478 merged and deployed at 12:10 UTC\n- Sentry issue CHECKOUT-123 resolved\n\n## Impact\n- 52 total errors, 28 affected users\n- Incident duration: ~3.5 hours\n- Revenue impact: minimal (quick fix)",
          "priority": 1,
          "priorityLabel": "Urgent",
          "estimate": 2,
          "boardOrder": 0,
          "sortOrder": 0,
          "startedAt": "2024-01-15T09:15:00Z",
          "completedAt": "2024-01-15T12:45:00Z",
          "createdAt": "2024-01-15T08:50:00Z",
          "updatedAt": "2024-01-15T12:45:00Z",
          "number": 892,
          "url": "https://linear.app/acme/issue/LIN-892",
          "branchName": "lin-892-checkout-typeerror",
          "customerTicketCount": 5,
          "previousIdentifiers": [],
          "team": {
            "id": "team_platform",
            "key": "LIN",
            "name": "Platform"
          },
          "state": {
            "id": "state_done",
            "name": "Done",
            "color": "#5e6ad2",
            "type": "completed"
          },
          "creator": {
            "id": "user_bob_linear",
            "name": "Bob Johnson",
            "displayName": "Bob Johnson",
            "email": "bob@acme.com",
            "avatarUrl": "https://avatars.example.com/bob",
            "isMe": false,
            "active": true
          },
          "assignee": {
            "id": "user_alice_linear",
            "name": "Alice Chen",
            "displayName": "Alice Chen",
            "email": "alice@acme.com",
            "avatarUrl": "https://avatars.example.com/alice",
            "isMe": false,
            "active": true
          },
          "project": {
            "id": "proj_q1_2024",
            "name": "Q1 2024 Platform",
            "url": "https://linear.app/acme/project/q1-2024-platform"
          },
          "cycle": {
            "id": "cycle_sprint_3",
            "name": "Sprint 3",
            "number": 3
          },
          "labels": [
            { "id": "label_bug", "name": "Bug", "color": "#d73a4a" },
            { "id": "label_p0", "name": "P0", "color": "#000000" },
            { "id": "label_checkout", "name": "Checkout", "color": "#0052cc" }
          ],
          "attachments": {
            "nodes": [
              {
                "id": "attachment_gh_pr_478",
                "title": "PR #478: fix: Handle null prices",
                "url": "https://github.com/acme/platform/pull/478",
                "source": "github",
                "sourceType": "githubPr",
                "metadata": {
                  "state": "merged",
                  "number": 478
                }
              },
              {
                "id": "attachment_sentry_checkout_123",
                "title": "CHECKOUT-123: TypeError: price.toFixed is not a function",
                "url": "https://sentry.io/organizations/acme/issues/4821593046/",
                "source": "sentry",
                "sourceType": "sentryIssue",
                "metadata": {
                  "shortId": "CHECKOUT-123"
                }
              }
            ]
          },
          "subscriberIds": [
            "user_alice_linear",
            "user_bob_linear",
            "user_charlie_linear"
          ]
        },
        "updatedFrom": {
          "stateId": "state_in_progress",
          "completedAt": null
        }
      }
    },
    {
      "source": "github",
      "eventType": "issues",
      "payload": {
        "action": "closed",
        "issue": {
          "id": 987654500,
          "node_id": "I_kwDOacme_issue_500",
          "number": 500,
          "title": "Bug: Checkout failing with TypeError in price calculation",
          "user": {
            "login": "bob",
            "id": 23456,
            "node_id": "U_bob",
            "avatar_url": "https://avatars.githubusercontent.com/u/23456",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 5,
              "node_id": "L_5",
              "name": "bug",
              "color": "d73a4a",
              "default": false
            },
            {
              "id": 6,
              "node_id": "L_6",
              "name": "critical",
              "color": "000000",
              "default": false
            }
          ],
          "state": "closed",
          "locked": false,
          "assignee": {
            "login": "alice",
            "id": 12345,
            "node_id": "U_alice",
            "avatar_url": "https://avatars.githubusercontent.com/u/12345",
            "type": "User",
            "site_admin": false
          },
          "assignees": [
            {
              "login": "alice",
              "id": 12345,
              "node_id": "U_alice",
              "avatar_url": "https://avatars.githubusercontent.com/u/12345",
              "type": "User",
              "site_admin": false
            }
          ],
          "milestone": null,
          "comments": 3,
          "created_at": "2024-01-15T09:00:00Z",
          "updated_at": "2024-01-15T12:45:00Z",
          "closed_at": "2024-01-15T12:45:00Z",
          "author_association": "MEMBER",
          "active_lock_reason": null,
          "body": "## Problem\nUsers reporting checkout failures in production. Multiple Sentry alerts for TypeError.\n\n## Stack Trace (from Sentry CHECKOUT-123)\n```\nTypeError: price.toFixed is not a function\n    at PriceCalculator.calculateTotal (checkout/PriceCalculator.ts:142)\n    at CheckoutForm.handleSubmit (checkout/CheckoutForm.tsx:89)\n```\n\n## Impact\n- 47 errors in last hour\n- 23 affected users\n- Checkout completely blocked\n\n## Related\n- Sentry Issue: CHECKOUT-123\n- Linear: LIN-892\n\n## Resolution\nFixed in PR #478 - deployed to production at 12:10 UTC",
          "reactions": {
            "url": "https://api.github.com/repos/acme/platform/issues/500/reactions",
            "total_count": 5,
            "+1": 3,
            "-1": 0,
            "laugh": 0,
            "hooray": 2,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
          },
          "html_url": "https://github.com/acme/platform/issues/500",
          "timeline_url": "https://api.github.com/repos/acme/platform/issues/500/timeline",
          "state_reason": "completed"
        },
        "repository": {
          "id": 345679,
          "node_id": "R_acme_platform",
          "name": "platform",
          "full_name": "acme/platform",
          "private": false,
          "owner": {
            "login": "acme",
            "id": 22223,
            "node_id": "O_acme",
            "avatar_url": "https://avatars.githubusercontent.com/u/22223",
            "type": "Organization",
            "site_admin": false
          },
          "html_url": "https://github.com/acme/platform",
          "description": "ACME Platform",
          "fork": false,
          "url": "https://api.github.com/repos/acme/platform",
          "created_at": "2023-01-01T00:00:00Z",
          "updated_at": "2024-01-15T00:00:00Z",
          "pushed_at": "2024-01-15T00:00:00Z",
          "homepage": null,
          "size": 5000,
          "stargazers_count": 150,
          "watchers_count": 150,
          "language": "TypeScript",
          "forks_count": 25,
          "open_issues_count": 11,
          "default_branch": "main",
          "topics": [],
          "visibility": "public"
        },
        "sender": {
          "login": "alice",
          "id": 12345,
          "node_id": "U_alice",
          "avatar_url": "https://avatars.githubusercontent.com/u/12345",
          "type": "User",
          "site_admin": false
        }
      }
    },
    {
      "source": "linear",
      "eventType": "Comment",
      "payload": {
        "action": "create",
        "type": "Comment",
        "createdAt": "2024-01-15T12:50:00Z",
        "organizationId": "org_acme_linear_001",
        "webhookId": "webhook_acme_001",
        "webhookTimestamp": 1705323000000,
        "data": {
          "id": "comment_lin_892_002",
          "body": "## Post-Incident Summary\n\n**Timeline:**\n- 08:30 - Sentry detected first error (CHECKOUT-123)\n- 08:50 - Linear issue created, assigned to Alice\n- 09:00 - GitHub issue #500 opened\n- 09:05 - Root cause identified (null discount handling)\n- 11:30 - PR #478 opened\n- 12:00 - PR merged by Charlie\n- 12:10 - Vercel deployment completed\n- 12:15 - Sentry confirmed no new errors\n- 12:45 - All issues closed\n\n**Impact:** 52 errors, 28 users affected, ~3.5 hour incident\n\n**Action Items:**\n1. Add null checks to other price calculations\n2. Set up Sentry alert  Linear automation\n3. Document pricing API null behavior",
          "createdAt": "2024-01-15T12:50:00Z",
          "updatedAt": "2024-01-15T12:50:00Z",
          "url": "https://linear.app/acme/issue/LIN-892#comment-comment_lin_892_002",
          "reactionData": [],
          "user": {
            "id": "user_alice_linear",
            "name": "Alice Chen",
            "displayName": "Alice Chen",
            "email": "alice@acme.com",
            "avatarUrl": "https://avatars.example.com/alice",
            "isMe": false,
            "active": true
          },
          "issue": {
            "id": "issue_lin_892",
            "identifier": "LIN-892",
            "title": "Critical: Checkout TypeError blocking all purchases",
            "url": "https://linear.app/acme/issue/LIN-892"
          }
        }
      }
    }
  ]
}
