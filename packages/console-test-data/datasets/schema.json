{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://lightfast.ai/schemas/test-dataset.json",
  "title": "Test Dataset",
  "type": "object",
  "required": ["name", "events"],
  "properties": {
    "name": {
      "type": "string"
    },
    "description": {
      "type": "string"
    },
    "events": {
      "type": "array",
      "items": { "$ref": "#/definitions/SourceEvent" },
      "minItems": 1
    }
  },
  "definitions": {
    "SourceEvent": {
      "type": "object",
      "required": ["source", "sourceType", "sourceId", "title", "body", "occurredAt", "references", "metadata"],
      "properties": {
        "source": { "type": "string", "enum": ["github", "vercel", "linear"] },
        "sourceType": { "type": "string" },
        "sourceId": { "type": "string" },
        "title": { "type": "string", "maxLength": 120 },
        "body": { "type": "string" },
        "actor": { "$ref": "#/definitions/SourceActor" },
        "occurredAt": { "type": "string" },
        "references": { "type": "array", "items": { "$ref": "#/definitions/SourceReference" } },
        "metadata": { "type": "object", "required": ["testData"] }
      }
    },
    "SourceActor": {
      "type": "object",
      "required": ["id", "name"],
      "properties": {
        "id": { "type": "string" },
        "name": { "type": "string" },
        "email": { "type": "string" },
        "avatarUrl": { "type": "string" }
      }
    },
    "SourceReference": {
      "type": "object",
      "required": ["type", "id"],
      "properties": {
        "type": { "type": "string", "enum": ["commit", "branch", "pr", "issue", "deployment", "project", "cycle", "assignee", "reviewer", "team", "label"] },
        "id": { "type": "string" },
        "url": { "type": "string" },
        "label": { "type": "string" }
      }
    }
  }
}
